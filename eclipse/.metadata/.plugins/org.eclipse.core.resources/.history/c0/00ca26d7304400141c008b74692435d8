package com.example.examplemod.gui;

import java.util.LinkedList;

import net.minecraft.client.Minecraft;
import net.minecraft.client.gui.FontRenderer;
import net.minecraft.client.gui.GuiButton;
import net.minecraft.client.gui.GuiScreen;
import net.minecraft.client.renderer.Tessellator;
import net.minecraft.client.renderer.texture.ITextureObject;
import net.minecraft.entity.player.EntityPlayer;
import net.minecraft.util.ResourceLocation;

import org.lwjgl.opengl.GL11;

//public class SkillGui extends GuiScreen
public class SkillGui extends GuiScreen
{
	public SkillGui(EntityPlayer player)
	{
		super();
		initGui();
	}
	
	public final int xSizeOfTexture = 200;
	public final int ySizeOfTexture = 200;
	public FontRenderer frender = Minecraft.getMinecraft().fontRenderer;
	public int posX=0, posY=0;
	int state=0;
	private LinkedList controlList = new LinkedList();
	
	@Override
	public void drawScreen(int x, int y, float f)
	{
		drawDefaultBackground();
		ResourceLocation imgloc = new ResourceLocation("modnamex:textures/skillgui.png");
		//ITextureObject var4 = this.mc.renderEngine.getTexture(imgloc);
		//GL11.glColor4f(1.0F, 1.0F, 1.0F, 1.0F);
		this.mc.renderEngine.bindTexture(imgloc);

		posX = (this.width - xSizeOfTexture) / 2;
		posY = (this.height - ySizeOfTexture) / 2;
		drawTexturedModalRectNoUV(posX, posY, xSizeOfTexture, ySizeOfTexture);
		
		drawContent(state);

		super.drawScreen(x, y, f);
	}
	
	public void drawContent(int idState){
		// draws tables of magic, ect
		FontRenderer frender = Minecraft.getMinecraft().fontRenderer;
		int posX = (this.width - xSizeOfTexture) / 2;
		int posY = (this.height - ySizeOfTexture) / 2;
		switch(idState){
		case 0:		// melee table
			MeleeGui();
			break;
		case 1:		// ranged table
			RangedGui();		
			break;
		case 2:		// magic table
			MagicGui();
			break;
		case 3:		// technical table
			TechnicalGui();
			break;
		case 4:		// passive table
			PassiveGui();
			break;
		}
	}
	
	public void initGui()
	{
		this.controlList.clear();
	
		int posx = (this.width - xSizeOfTexture) / 2;
		int posy = (this.height - ySizeOfTexture) / 2;
		int offset = 15;
		this.buttonList.add(new GuiButton(0, posx+offset, posy+10, 30, 12, "Melee"));
		this.buttonList.add(new GuiButton(1, posx+offset*3, posy+10, 33, 12, "Ranged"));
		this.buttonList.add(new GuiButton(2, posx+offset*5, posy+10, 30, 12, "Magic"));
		this.buttonList.add(new GuiButton(3, posx+offset*7, posy+10, 35, 12, "Technical"));
		this.buttonList.add(new GuiButton(4, posx+offset*9, posy+10, 35, 12, "Passive"));
		//GL11.glScaled(0.7f, 0.7f, 0.7f); // scale the button gui
	}
	
	// Button actions
	public void actionPerformed(GuiButton button)
	{
		if(button.id < 5){
			state=button.id;
		}else{
			switch(button.id)
			{
			default:
				break;
			}
		}
	}
	
	public void MeleeGui(){
		//frender.drawString("Melee tree", posX+xSizeOfTexture/2, posY+40, 10);
		
	}
	
	public void RangedGui(){
		frender.drawString("Ranged tree", posX+2, posY+40, 10);
	}
	
	public void MagicGui(){
		frender.drawString("Magic tree", posX+2, posY+40, 10);
		drawLoc("modnamex:textures/magicA.png",posX+xSizeOfTexture/2-20/2, posY+40, 20, 20);
		// 2nd Row
		drawLoc("modnamex:textures/magicB.png",posX+xSizeOfTexture/2-10-20, posY+40+25*2, 20, 20);
		drawLoc("modnamex:textures/magicC.png",posX+xSizeOfTexture/2+10, posY+40+25*2, 20, 20);
		// 3rd Row
		drawLoc("modnamex:textures/magicD.png",posX+xSizeOfTexture/2-10-20, posY+40+25*3, 20, 20);
		drawLoc("modnamex:textures/magicE.png",posX+xSizeOfTexture/2-40-20, posY+40+25*3, 20, 20);
		drawLoc("modnamex:textures/magicF.png",posX+xSizeOfTexture/2+10, posY+40+25*3, 20, 20);
		drawLoc("modnamex:textures/magicG.png",posX+xSizeOfTexture/2+40, posY+40+25*3, 20, 20);
	}
	
	public void TechnicalGui(){
		frender.drawString("Technical tree", posX+2, posY+40, 10);
	}
	
	public void PassiveGui(){
		frender.drawString("Passive tree", posX+2, posY+40, 10);
	}
	
	public void drawLoc(String loc, int x, int y, int width, int height){
		GL11.glColor4f(1.0F, 1.0F, 1.0F, 1.0F);
		ResourceLocation imgloc = new ResourceLocation(loc);
		this.mc.renderEngine.bindTexture(imgloc);
		//drawTexturedModalRect(posX+xSizeOfTexture/2-32/2, posY+40, 0, 0, 32, 32);
		drawTexturedModalRectNoUV(x,y,width,height);
	}
	
	// Modified excerpt from Gui.class
	 public void drawTexturedModalRectNoUV(int x, int y, int width, int height)
	 {
	     Tessellator tessellator = Tessellator.instance;
	     tessellator.startDrawingQuads();    
	     tessellator.addVertexWithUV(x        , y + height, 0, 0.0, 1.0);
	     tessellator.addVertexWithUV(x + width, y + height, 0, 1.0, 1.0);
	     tessellator.addVertexWithUV(x + width, y         , 0, 1.0, 0.0);
	     tessellator.addVertexWithUV(x        , y         , 0, 0.0, 0.0);
	     tessellator.draw();
	 }
}
